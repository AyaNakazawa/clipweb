
- 同時編集について
  - 同時編集テーブル
    - クリップハッシュ
    - 編集ユーザーハッシュ
    - バージョンハッシュ
      - カレントコードのチェックサム
    - diffの内容
    - アクセス日時

  - クライアント側、送信内容
    - diff
      - 一塊になる単位にする
        - マルチカーソルになったりすると一塊にできない
        - クライアント側で、一塊の単位にしてから複数同時に送信する
    - 編集前のコードのチェックサム
      - サーバでバージョンを確認する
        - 受信したバージョン以降の編集をサーバ内で計算して、
        - その分ずらしてdiffを入れる

  - クライアント側、受信内容
    - 最新のコード
      - コード本体まるごと
    - カレント編集メンバー
      - 送受信の最大一定間隔（30秒くらい？）以内の送信ユーザーが編集メンバー
      - オーナーハッシュ
      - Gravatarハッシュ
      - カーソル位置
        - 受信したdiffの最後の位置がカーソル位置

  - 編集を送受信するタイミング
    - 一定間隔ごと（500ms～30秒くらい？）
      - 初期状態で間隔が短い状態
      - 更新がない場合は、一定間隔を少しずつ広げる
      - 更新があったら、一定間隔を初期化
    - カーソルが移動したとき
      - 入力せずに連続でカーソル移動している場合は除外
    - 入力と削除が切り替わったとき
      - 削除が終わった時点で、一旦送る
      - 入力が終わって削除が始まる前に、一旦送る
    - 手動受信
      - ボタンかなにか用意しておく？

  - サーバ側のコード履歴に反映
    - 常に履歴は更新する
      - もし前の受信が一定間隔（1分くらい？）以内なら、履歴を作成じゃなく上書き
      - 前の受信が一定間隔以上なら、新しいコード履歴を作成
      - ずっと編集し続けていても、一定時間（10分くらい？）経過したら新しいコード履歴を作成

  - 強制マージ
    - 誰かが保存ボタンを押したら、みんな強制でそのコードに初期化される
      - テーブルも初期化される

  - その他
    - 送受信と生存確認、全て同時に行う

  - ユーザの管理
